<!DOCTYPE html>
<html lang="it" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CryptoChips Portal</title>

  <!-- Libs -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/dark.css">
  <link href="https://fonts.googleapis.com/css2?family=Rock+Salt&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- CSS originale -->
  <link id="theme-style" rel="stylesheet" href="styles6_cybertriba_glow.css"/>

  <!-- Overrides neutri (no Halloween) -->
  <style>
    /* Full-width fixes */
    html, body { margin:0; padding:0; width:100%; height:100%; overflow-x:hidden; }
    .footer-cybertribal .footer-inner { max-width:none !important; width:100% !important; margin:0 !important; }
    form, .typing-text, .w-full { max-width:none !important; width:100% !important; }
    .no-scrollbar::-webkit-scrollbar { display:none; }
    .no-scrollbar { -ms-overflow-style:none; scrollbar-width:none; }

    /* Partner tiles (neutro) */
    .partner-list { list-style:none; margin:0; padding:0; }
    .partner-wrap {
      border-radius:.9rem;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.10);
      padding:.4rem .5rem;
      transition: transform .12s ease, background-color .12s ease, filter .12s ease, box-shadow .12s ease;
    }
    .partner-wrap:hover {
      transform: translateY(-2px);
      background-color: rgba(255,255,255,.06);
      filter: saturate(1.05);
      box-shadow: 0 8px 24px rgba(0,0,0,.25);
    }

    /* Area contenuti (full width, neutra) */
    .main-content {
      display:flex; justify-content:center; align-items:flex-start;
      width:100%; min-height: calc(100vh - 240px);
      margin:0; padding: 1.5rem 2rem; box-sizing:border-box;
    }

    /* Card/modali base (neutri) */
    .hx-card { background: rgba(20,20,28,.66); border:1px solid rgba(255,255,255,.1); border-radius:1.1rem; padding:1rem; box-shadow: 0 8px 40px rgba(0,0,0,.28); }
    .modal-dirty, .modal { backdrop-filter: blur(2px); border-radius:1rem; border:1px solid rgba(255,255,255,.1); }
    .modal .modal-content, .modal-dirty .modal-content { background: rgba(16,18,24,.98); border-radius:1rem; border:1px solid rgba(255,255,255,.1); box-shadow: 0 20px 70px rgba(0,0,0,.6); }
    .modal-close { background:none; border:none; color:#fff; font-size:1.8rem; cursor:pointer; line-height:1; padding:.2rem .5rem; border-radius:.5rem; }

    /* Responsive */
    @media (min-width: 768px){
      #partners-left, #partners-right { display:flex !important; }
    }
  </style>
</head>

<body class="app">
  <div id="auth-button-container" style="position:absolute; top:1rem; left:1rem; z-index:10;"></div>

  <!-- HEADER -->
  <header id="navbar" class="navbar">
    <div class="w-full px-4 sm:px-6 lg:px-8 pt-6">
      <div class="grid items-center gap-4 md:gap-8 md:grid-cols-3">
        <!-- Partners left -->
        <ul id="partners-left" class="partner-list hidden md:!flex justify-end items-center gap-4 lg:gap-6 min-h-[3.5rem]">
          <li class="partner-wrap"><img src="partner_1.png" alt="Partner 1" class="block h-12 lg:h-14 w-auto object-contain" width="200" height="200" loading="lazy" decoding="async" onerror="this.src='partner-fallback.svg'; this.onerror=null;"></li>
          <li class="partner-wrap"><img src="partner_2.png" alt="Partner 2" class="block h-12 lg:h-14 w-auto object-contain" width="200" height="200" loading="lazy" decoding="async" onerror="this.src='partner-fallback.svg'; this.onerror=null;"></li>
          <li class="partner-wrap"><img src="partner_3.png" alt="Partner 3" class="block h-12 lg:h-14 w-auto object-contain" width="200" height="200" loading="lazy" decoding="async" onerror="this.src='partner-fallback.svg'; this.onerror=null;"></li>
          <li class="partner-wrap"><img src="partner_8.jpg" alt="Partner 8" class="block h-12 lg:h-14 w-auto object-contain" width="200" height="200" loading="lazy" decoding="async" onerror="this.src='partner-fallback.svg'; this.onerror=null;"></li>
        </ul>

        <!-- Brand -->
        <div class="flex flex-col items-center text-center justify-self-center">
          <img src="logocc1.png" alt="CryptoChips Logo" class="w-[220px] sm:w-[300px] md:w-[360px] lg:w-[420px] h-auto mb-2 md:mb-3 drop-shadow-xl" width="300" height="100" fetchpriority="high" decoding="async" onerror="this.src='partner-fallback.svg'; this.onerror=null;">
          <p class="text-amber-300/90 text-xs sm:text-sm italic" style="font-family: 'Rock Salt', system-ui, sans-serif;">Built for Users, Powered by Blockchain</p>
        </div>

        <!-- Partners right -->
        <ul id="partners-right" class="partner-list hidden md:!flex justify-start items-center gap-4 lg:gap-6 min-h-[3.5rem]">
          <li class="partner-wrap"><img src="partner_4.png" alt="Partner 4" class="block h-12 lg:h-14 w-auto object-contain" width="200" height="200" loading="lazy" decoding="async" onerror="this.src='partner-fallback.svg'; this.onerror=null;"></li>
          <li class="partner-wrap"><img src="partner_5.png" alt="Partner 5" class="block h-12 lg:h-14 w-auto object-contain" width="200" height="200" loading="lazy" decoding="async" onerror="this.src='partner-fallback.svg'; this.onerror=null;"></li>
          <li class="partner-wrap"><img src="partner_6.png" alt="Partner 6" class="block h-12 lg:h-14 w-auto object-contain" width="200" height="200" loading="lazy" decoding="async" onerror="this.src='partner-fallback.svg'; this.onerror=null;"></li>
          <li class="partner-wrap"><img src="partner_7.jpg" alt="Partner 7" class="block h-12 lg:h-14 w-auto object-contain" width="200" height="200" loading="lazy" decoding="async" onerror="this.src='partner-fallback.svg'; this.onerror=null;"></li>
        </ul>
      </div>

      <!-- Partners mobile -->
      <div id="partners-mobile" class="md:hidden mt-4 flex flex-row items-center gap-3 overflow-x-auto no-scrollbar py-1" aria-label="Partners">
        <div class="partner-wrap flex-none"><img src="partner1.png" alt="Partner 1" class="block h-10 w-auto object-contain" width="140" height="44" loading="lazy" decoding="async" onerror="this.src='partner-fallback.svg'; this.onerror=null;"></div>
        <div class="partner-wrap flex-none"><img src="partner2.png" alt="Partner 2" class="block h-10 w-auto object-contain" width="140" height="44" loading="lazy" decoding="async" onerror="this.src='partner-fallback.svg'; this.onerror=null;"></div>
        <div class="partner-wrap flex-none"><img src="partner3.png" alt="Partner 3" class="block h-10 w-auto object-contain" width="140" height="44" loading="lazy" decoding="async" onerror="this.src='partner-fallback.svg'; this.onerror=null;"></div>
        <div class="partner-wrap flex-none"><img src="partner4.png" alt="Partner 4" class="block h-10 w-auto object-contain" width="140" height="44" loading="lazy" decoding="async" onerror="this.src='partner-fallback.svg'; this.onerror=null;"></div>
        <div class="partner-wrap flex-none"><img src="partner5.png" alt="Partner 5" class="block h-10 w-auto object-contain" width="140" height="44" loading="lazy" decoding="async" onerror="this.src='partner-fallback.svg'; this.onerror=null;"></div>
      </div>

      <!-- NAVBAR MENU -->
      <nav class="navbar-menu mt-6" role="navigation" aria-label="Main Navigation">
        <div class="flex flex-wrap gap-2 md:gap-3">
          <button class="menu-button" data-section="loadLatestNews">News & Guides</button>
          <button class="menu-button" data-section="wallet">Wallet</button>
          <button class="menu-button" data-section="nfts">NFTs Wallet</button>
          <button class="menu-button" data-section="goblin-dex">Goblin DeX(Beta)</button>
          <button class="menu-button" data-section="daily">Daily Chests</button>
          <button class="menu-button" data-section="account">Account</button>

          <div class="dropdown relative">
            <button class="menu-button dropdown-toggle" aria-haspopup="true" aria-expanded="false">
              Earn ▾
            </button>
            <div class="dropdown-menu hidden" role="menu" id="earn-menu">
              <button class="dropdown-item w-full text-left" data-section="token-staking">Custodial Token Staking</button>
              <button class="dropdown-item w-full text-left" data-section="noncustodialfarms">NC NFTs Farms</button>
              <hr class="dropdown-divider"/>
              <div class="dropdown-group">
                <button class="dropdown-item w-full text-left" data-section="c2e-telegram">C2E - Telegram</button>
                <button class="dropdown-item w-full text-left" data-section="c2e-twitch">C2E - Twitch</button>
              </div>
            </div>
          </div>

          <div class="dropdown relative">
            <button class="menu-button dropdown-toggle" aria-haspopup="true" aria-expanded="false">
              Creators Tools ▾
            </button>
            <div class="dropdown-menu hidden" role="menu" id="creators-tools-menu">
              <button class="dropdown-item w-full text-left" data-section="create-token-pool">Create Token Staking Pool</button>
              <button class="dropdown-item w-full text-left hidden" id="creator-dashboard-nav-btn" data-section="creator-dashboard">
                Creator Dashboard
              </button>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <!-- MAIN (full width) -->
  <main id="app" class="main-content" role="main">
    <div class="w-full px-4 sm:px-6 lg:px-8">
      <div id="content-root" class="w-full"></div>
    </div>
  </main>

  <!-- MODAL “dirty” -->
  <div id="modal" class="modal-dirty hidden" role="dialog" aria-modal="true"
       style="position: fixed; top: 20%; left: 50%; transform: translate(-50%, -50%); z-index: 9999; background-color: rgba(0, 0, 0, 0.85); padding: 2rem; border-radius: 12px; box-shadow: 0 0 20px rgba(0,0,0,.5);">
    <button id="close-modal" class="modal-close" style="position: absolute; z-index: 10001; top: 0.75rem; right: 0.75rem;">×</button>
    <div class="modal-content" style="position: relative; max-width: 90vw; max-height: 90vh; overflow-y: auto; color: #fff;">
      <div id="modal-body" class="modal-body"></div>
    </div>
  </div>

  <!-- UNIVERSAL MODAL -->
  <div id="universal-modal" class="modal hidden">
    <div class="modal-content">
      <button class="modal-close">×</button>
      <div class="modal-header"></div>
      <div class="modal-message" style="margin: 0.5rem 0;"></div>
      <div class="modal-body"></div>
      <div class="modal-footer"></div>
    </div>
  </div>

  <!-- CONFIRM MODAL -->
  <div id="confirm-modal" class="modal hidden" role="dialog" aria-modal="true"
       style="position: fixed; top: 20%; left: 50%; transform: translate(-50%, -50%); z-index: 9999; background-color: rgba(0, 0, 0, 0.9); padding: 2rem; display: none; border-radius: 12px; box-shadow: 0 0 20px rgba(255,0,0,.4);">
    <div class="modal-content confirm-box" style="max-width: 460px; color: #fff;">
      <h2 class="modal-title">Confirm Deletion</h2>
      <p id="confirm-message" class="modal-text">Are you sure you want to remove this item?</p>
      <div class="modal-actions" style="margin-top: 1rem; display: flex; justify-content: space-between;">
        <button id="confirm-cancel" class="btn-cancel" style="padding: 0.5rem 1rem; background-color: #666; color: #fff; border: none; border-radius: 6px; cursor: pointer;">Cancel</button>
        <button id="confirm-yes" class="btn-confirm" style="padding: 0.5rem 1rem; background-color: #ff073a; color: #fff; border: none; border-radius: 6px; cursor: pointer;">Yes, Remove</button>
      </div>
    </div>
  </div>

  <aside id="toast-container" class="toast-container" role="status" aria-live="polite"></aside>

  <!-- Build flags -->
  <script>window.__APP_BUILD__ = "prod-2025-10-04";</script>
  <script>window.__NFTF_AUTO_DISABLED__ = true;</script>
  <script src="main_restyled.js?v=prod-2025-10-04" defer></script>

  <!-- UI wiring -->
  <script>
    (function () {
      // Toggle dropdowns
      document.querySelectorAll('.dropdown-toggle').forEach(toggle => {
        toggle.addEventListener('click', (e) => {
          e.stopPropagation();
          document.querySelectorAll('.dropdown-menu').forEach(m => {
            if (m !== toggle.nextElementSibling) m.classList.add('hidden');
          });
          toggle.nextElementSibling.classList.toggle('hidden');
        });
      });
      // Chiudi dropdown cliccando fuori
      document.addEventListener('click', () => {
        document.querySelectorAll('.dropdown-menu').forEach(m => m.classList.add('hidden'));
      });

      // Delegation per le voci dei menu a tendina
      document.addEventListener('click', (e) => {
        const item = e.target.closest('.dropdown-item');
        if (!item) return;
        const section = item.dataset.section;
        if (typeof loadSection === 'function') loadSection(section);
        document.querySelectorAll('.dropdown-menu').forEach(m => m.classList.add('hidden'));
      });

      // Modali
      const closeModalBtn = document.getElementById('close-modal');
      if (closeModalBtn) {
        closeModalBtn.addEventListener('click', () => {
          document.getElementById('modal').classList.add('hidden');
        });
      }
      const confirmCancel = document.getElementById('confirm-cancel');
      if (confirmCancel) {
        confirmCancel.addEventListener('click', () => {
          document.getElementById('confirm-modal').classList.add('hidden');
        });
      }
    })();
  </script>

  <!-- FOOTER -->
  <footer class="footer-cybertribal">
    <div class="footer-inner w-full px-4 sm:px-6 lg:px-8 py-8">
      <p class="footer-text">
        Powered by <strong>CryptoChips</strong> — Built on WAX Blockchain<br/>
        <span class="footer-sub">All rights reserved © 2025 — ChipsWallet</span>
      </p>
      <div class="footer-links mt-3 flex flex-wrap gap-4">
        <a href="https://neftyblocks.com/collection/cryptochaos1" target="_blank">NFT Store</a>
        <a href="https://x.com/ooc_nfts" target="_blank">Twitter Official</a>
        <a href="https://wax.bloks.io/account/xcryptochips" target="_blank">Smart Contract</a>
      </div>
      <div class="footer-telegram mt-4">
        <p class="footer-sub">
          Join the community to chat, ask questions or get support:
          <a href="https://t.me/outofcontrolnfts" target="_blank">Official Telegram</a>
          &nbsp;|&nbsp;
          <a href="https://t.me/chipswallet_bot" target="_blank">Telegram Bot</a>
        </p>
      </div>
      <div class="footer-twitch mt-2">
        <p class="footer-sub">
          Join the Twitch ChipsMasterBot to get rewarded in the partner Twitch Channel during streamings:
          <a href="https://www.twitch.tv/chipsmasterbot" target="_blank">Twitch Bot</a>
        </p>
      </div>
    </div>
  </footer>

  <!-- Creator Dashboard Gate -->
  <script>
    window.updateCreatorDashboardVisibility = function () {
      const btn = document.getElementById('creator-dashboard-nav-btn');
      if (!btn) return;
      const wax = window?.userData?.wax_account;
      if (wax && wax.toLowerCase() === 'agoscry4ever') {
        btn.classList.remove('hidden');
      } else {
        btn.classList.add('hidden');
      }
    };
    document.addEventListener('DOMContentLoaded', () => {
      window.updateCreatorDashboardVisibility();
    });
  </script>
</body>
</html>
