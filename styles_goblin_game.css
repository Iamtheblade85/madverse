/* =========================================================
   Dwarfs Cave â€” Styles (complete)
   - Dark UI with neon accents
   - Cards, grid, toolbar, chips, segments
   - Goblin list + equipment editor (8 slots)
   - Toasts, skeleton loaders, buttons
   - Rarity tags + accessibility helpers
   ========================================================= */

:root{
  --cv-bg:#111;
  --cv-elev:#171717;
  --cv-border:#2b2b2b;
  --cv-soft:#141414;

  --cv-amber:#ffcc66;
  --cv-cyan:#7ff6ff;
  --cv-green:#78ff78;
  --cv-chip:#ffe600;

  --cv-text:#f1f5f9;
  --cv-sub:#9aa0a6;

  --cv-shadow:0 0 12px rgba(0,0,0,.35);
  --cv-inset:inset 0 0 16px rgba(255,255,255,.02);
}

* { box-sizing: border-box; }
html,body { height:100%; background:#0d0d0d; color:var(--cv-text); font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; }
img { display:block; max-width:100%; }
button { font: inherit; }
small { opacity:.8; font-size:.75em; }
a { color: inherit; text-decoration: none; }

.cv-wrap { padding: 18px; max-width: 1400px; margin: 0 auto; }
.cv-title{ color:var(--cv-chip); font-family: Orbitron, system-ui, sans-serif; margin:0 0 .6rem 0; letter-spacing:.2px; }

.cv-row-wrap{ display:flex; gap:1.5rem; flex-wrap:wrap; align-items:flex-start; }
.cv-col-left{ flex:1 1 56%; min-width:320px; }
.cv-col-right{ flex:1 1 44%; min-width:320px; display: grid; gap: 1rem; }

.cv-canvas-wrap{ width:100%; aspect-ratio:16/9; border-radius:12px; overflow:hidden; box-shadow:0 0 10px rgba(255,230,0,.35); border:1px solid #3a3200; background:#000; }
.cv-canvas{ width:100%; height:100%; display:block; }

.cv-card{
  background:linear-gradient(180deg,#151515,#0f0f0f);
  border-radius:14px;
  padding:1rem;
  color:#fff;
  border:1px solid var(--cv-border);
  box-shadow:var(--cv-shadow), var(--cv-inset);
}
.cv-card.amber{ box-shadow:0 0 12px rgba(255,165,0,.2), var(--cv-inset); border-color:#3a2e10; }
.cv-card.green{ box-shadow:0 0 12px rgba(0,255,0,.15), var(--cv-inset); border-color:#124a12; }

.cv-card-head{ display:flex; align-items:center; justify-content:space-between; gap:.5rem; margin-bottom:.6rem; }
.cv-card-title{ margin:0; font-family: Orbitron, system-ui, sans-serif; }
.cv-card-title.cyan { color:#00e6ff; }
.cv-card-title.amber { color:#ffcc66; }
.cv-card-title.green { color:#78ff78; }

.cv-chip{
  font-size:.72rem; padding:.15rem .5rem; border-radius:999px;
  background:#1a1a1a; color:#cfd9df; border:1px solid #333;
}
.cv-chip.cyan-outline{ background:#152024; color:#7ff6ff; border-color:#20444a; }
.cv-chip.amber-outline{ background:#2a2211; color:#ffcc66; border-color:#4a3a12; }
.cv-chip.green-outline{ background:#133113; color:#b7ffb7; border-color:#1f5220; }

.cv-cards{ display:grid; grid-template-columns:repeat(auto-fit, minmax(180px, 1fr)); gap:.75rem; align-items:stretch; }

.cv-card-mini{
  background:linear-gradient(180deg,#141414,#0f0f0f);
  border:1px solid var(--cv-border);
  border-radius:12px;
  padding:.7rem .8rem;
  box-shadow:0 2px 8px rgba(0,0,0,.35);
}
.cv-mini-head{ display:flex; align-items:center; justify-content:space-between; gap:.5rem; }
.cv-mini-title{ color:var(--cv-chip); font-weight:700; font-size:.96rem; max-width:62%; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.cv-time{ font-size:.78rem; color:#b7ffb7; opacity:.85; }
.cv-mini-kv{ display:flex; gap:.45rem; margin-top:.45rem; }
.kv{ flex:1 1 0; background:#0f0f0f; border:1px solid var(--cv-border); border-radius:10px; padding:.35rem .5rem; }
.kv .k{ font-size:.72rem; color:#9aa0a6; }
.kv .v{ font-weight:800; font-size:1.02rem; color:#e8e8e8; }

.cv-bonus-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:.75rem; align-items:stretch; }

.cv-empty{ color:#caa; margin-top:.5rem; }

.cv-cta{ text-align:center; }
.cv-cta-note{ color:#e9e3bf; font-size:.92rem; margin:.2rem 0 .4rem; }
.cv-cta-hint{ font-size:.82rem; color:#cdbb7a; margin-top:.35rem; }
.muted{ opacity:.85; }

.cv-btn{
  background:#1c1c1c;
  border:1px solid #444;
  color:var(--cv-chip);
  padding:.55rem .8rem;
  border-radius:10px;
  cursor:pointer;
  transition:transform .08s ease, box-shadow .18s ease;
}
.cv-btn:hover{ transform: translateY(-1px); box-shadow:0 6px 18px rgba(255,230,0,.12); }
.cv-btn:disabled{ opacity:.6; cursor:not-allowed; }
.cv-btn-perk{
  border-color:#665200;
  background:linear-gradient(180deg,#ffe066,#ffbf00);
  color:#1a1200; font-weight:800; letter-spacing:.2px;
  box-shadow:0 4px 14px rgba(255,200,0,.25), inset 0 0 8px rgba(255,255,255,.35);
}

.cv-toast-host{ display:flex; flex-direction:column; gap:.5rem; margin:.5rem 0; }
.cv-toast{ padding:.8rem; background:#222; border-left:5px solid #0ff; border-radius:8px; color:#fff; font-family:Orbitron, system-ui, sans-serif; }
.cv-toast.ok{ border-left-color:#0f0; }
.cv-toast.warn{ border-left-color:#ffa500; }
.cv-toast.err{ border-left-color:#ff4d4d; }

.cv-section{ margin-top: 1.4rem; }
.cv-toolbar{ display:flex; flex-wrap:wrap; gap:.5rem; align-items:center; justify-content:center; margin-bottom: .9rem; }
.cv-input{ width:220px; background:#151515; border:1px solid #333; color:#eee; padding:.55rem .7rem; border-radius:10px; }
.cv-select{ min-width:160px; background:#151515; border:1px solid #333; color:#eee; padding:.55rem .7rem; border-radius:10px; }
.cv-range{ display:flex; align-items:center; gap:.45rem; color:#ccc; font-size:.9rem; }
.cv-range-val{ color:#0ff; font-size:.9rem; }

.cv-segment{ display:flex; background:#1a1a1a; border:1px solid #333; border-radius:10px; overflow:hidden; }
.cv-seg-btn{ background:#1a1a1a; color:#ddd; border:none; padding:.5rem .7rem; cursor:pointer; border-right:1px solid #333; }
.cv-seg-btn:last-child{ border-right:none; }
.cv-seg-btn.is-active{ background:#2a2a2a; color:#fff; }

.cv-card.sticky{
  position: sticky; bottom: 12px; z-index: 40;
  backdrop-filter: blur(6px);
  background: linear-gradient(180deg, rgba(20,20,20,.9), rgba(12,12,12,.9));
  border: 1px solid var(--cv-border);
  box-shadow: 0 8px 24px rgba(0,0,0,.35);
}

.cv-active-filters{ display:flex; flex-wrap:wrap; gap:.4rem; margin:.35rem 0; }
.cv-badge{
  display:inline-flex; align-items:center; gap:.35rem; font-size:.72rem;
  padding:.18rem .55rem; border-radius:999px; border:1px solid #2a7f2a;
  background:linear-gradient(180deg,#173e17,#0f2a0f); color:#9dff9d;
  box-shadow:0 0 10px rgba(0,255,0,.12);
}

.cv-goblin-grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap:12px; align-items:stretch; }

.cv-gob-card{
  background:linear-gradient(180deg,#151515,#0f0f0f);
  border:1px solid var(--cv-border);
  border-radius:14px; padding:.75rem;
  transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;
  position:relative;
}
.cv-gob-card[aria-checked="true"]{
  border-color: rgba(255,230,0,.6);
  box-shadow:0 0 16px rgba(255,230,0,.25), 0 0 0 1px rgba(255,230,0,.18) inset;
}
.cv-gob-card[aria-disabled="true"]{ opacity:.78; filter:grayscale(10%) brightness(.95); cursor:not-allowed; }

.cv-gob-head{ display:flex; align-items:center; gap:.8rem; min-width:0; }
.cv-gob-thumb{ width:68px; height:68px; border-radius:14px; object-fit:cover; outline:1px solid var(--cv-border); box-shadow:0 3px 10px rgba(0,0,0,.35); }
.cv-gob-name{ color:var(--cv-chip); font-family:Orbitron,system-ui,sans-serif; font-size:1rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; flex:1; }

.cv-rarity{
  font-size:.72rem; padding:.16rem .55rem; border-radius:999px;
  border:1px solid #333; box-shadow:0 0 10px rgba(255,255,255,.05), inset 0 0 8px rgba(255,255,255,.06);
  white-space:nowrap;
}

.cv-gob-pillrow{ display:flex; flex-wrap:wrap; gap:.45rem; margin-top:.45rem; }
.cv-pill{ min-width:110px; flex:1 1 110px; background:#131313; border:1px solid var(--cv-border); border-radius:10px; padding:.35rem .55rem; }
.cv-chip-key{ font-size:.78rem; color:var(--cv-sub); letter-spacing:.3px; }
.cv-chip-val{ font-weight:800; color:#eaeaea; }

.cv-meter{ display:flex; align-items:center; gap:.6rem; margin-top:.55rem; }
.cv-meter-bar{ flex:1 1 auto; background:#141414; border:1px solid var(--cv-border); border-radius:999px; height:9px; overflow:hidden; }
.cv-meter-bar > div{
  height:100%;
  background:linear-gradient(90deg,#ffe600,#ff9d00);
  box-shadow:inset 0 0 10px rgba(255,255,255,.25), 0 0 8px rgba(255,214,0,.35);
}
.cv-meter-val{ min-width:56px; text-align:right; font-size:.82rem; font-weight:800; color:#7efcff; }

.cv-resting-ribbon{
  position:absolute; top:8px; right:8px;
  background:linear-gradient(135deg,#d32f2f,#b71c1c); color:#fff;
  font-weight:700; font-size:.7rem; padding:.25rem .5rem; border-radius:8px;
  box-shadow:0 0 8px rgba(255,0,0,.5); letter-spacing:.5px;
}

.cv-gob-actions{ display:flex; align-items:center; justify-content:space-between; margin-top:.5rem; gap:.5rem; }
.cv-gob-actions .left{ display:flex; align-items:center; gap:.5rem; }
.cv-checkbox{ transform:scale(1.15); accent-color:#ffe600; }

.cv-equip-panel{ margin-top:.6rem; border-top:1px solid var(--cv-border); padding-top:.6rem; display:none; }
.cv-equip-panel.is-open{ display:block; }
.cv-slot-grid{ display:grid; grid-template-columns: repeat(4, 1fr); gap:.45rem; }
.cv-slot{ background:#141414; border:1px dashed #3a3a3a; border-radius:10px; padding:.5rem; min-height:70px; display:flex; flex-direction:column; gap:.35rem; }
.cv-slot.filled{ border-style:solid; border-color:#4a4a4a; background:#101010; }
.cv-slot-title{ font-size:.78rem; color:#9aa0a6; display:flex; align-items:center; justify-content:space-between; gap:.35rem; }
.cv-slot-item{ display:flex; align-items:center; gap:.5rem; }
.cv-slot-item img{ width:28px; height:28px; border-radius:6px; object-fit:cover; border:1px solid #333; }
.cv-slot-controls{ display:flex; gap:.35rem; }

.cv-tag{ font-size:.7rem; border:1px solid #333; padding:.1rem .4rem; border-radius:999px; }
.cv-tag.common{ color:#c9d1d9; background:#202225; border-color:#2f3238; }
.cv-tag.uncommon{ color:#4ade80; background:#15341d; border-color:#2a5e39; }
.cv-tag.rare{ color:#60a5fa; background:#0d263a; border-color:#1f3e5f; }
.cv-tag.epic{ color:#c084fc; background:#2a0f33; border-color:#4a1f59; }
.cv-tag.legendary{ color:#fbbf24; background:#332406; border-color:#5b4715; }
.cv-tag.mythic{ color:#fb923c; background:#33170a; border-color:#5a2b17; }

.cv-equip-select{ width:100%; background:#151515; border:1px solid #333; color:#ddd; padding:.35rem .45rem; border-radius:8px; }
.cv-equip-save{ margin-top:.6rem; display:flex; justify-content:flex-end; }

/* Skeleton loader */
.cv-skel{ position:relative; overflow:hidden; background:#141414; border:1px solid var(--cv-border); border-radius:12px; height:72px; }
.cv-skel::after{
  content:""; position:absolute; inset:0;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,.06), transparent);
  transform:translateX(-100%); animation:skel 1.2s infinite;
}
@keyframes skel{ to { transform:translateX(100%);} }

.cv-sub{ color:var(--cv-sub); }

/* Accessibility focus */
:focus-visible{ outline:2px solid var(--cv-chip); outline-offset:2px; }

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  *{ transition:none !important; animation:none !important; }
}
